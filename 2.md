# Расчёт нагрузки

## Продуктовые метрики

### Сводная таблица

| MAU, млн | DAU, млн | СРХ, шт |   СРХ, ГБ    | СКД, действий/день |
|:--------:|:--------:|:-------:|:------------:|:------------------:|
|  62,83   |  24,72   |   380   | 1,03 * 10^-4 |    2,44 / 47,67    |

**Расшифровка:**
- **MAU** — месячная аудитория.
- **DAU** — дневная аудитория.
- **СРХ** — средний размер хранилища на пользователя.
- **СКД** — среднее число продуктовых действий пользователя.


### Расчёт MAU, DAU

В источнике [[1]](https://mediascope.net/upload/iblock/9da/f39jd547adzptf0mu2j1tlmw44pjgt5d/Mediascope_НРФ_6%20суток.pdf) 
дана месячная аудитория интернета в РФ и процент пользователей OZON, отсюда считаем MAU:

MAU = 103 * 0.61 = 62,83 млн

Также в источнике указан и дневной охват аудитории:

DAU = 103 * 0.24 = 24,72 млн

### Средний размер хранилища пользователя (СРХ)

В MVP маркетплейса для пользователя существенно хранить:
1. **Избранное** 
2. **История заказов** за период хранения (например, 3 года)
3. **Профиль/адреса/контакты**

Среднее число заказов на пользователя в год из источника [[2]](https://ir.ozon.com/en/sth/ozon-reports-second-quarter-2025-financial-results-and-raises-full-year-outlook-c397b9ca) 
равно 30, количество товаров в заказе 3. [[3]](https://datainsight.ru/sites/default/files/DI_b2c_online-import_2024_short_version.pdf)
Тогда, считая что заказ состоит из шапки и самих товаров, выходит (1 + 3) * 30 * 3 = 360.
Среднее число избранных товаров на пользователя не указано в открытых источниках, однако опираясь на данные [[4]](https://www.retail.ru/news/ozon-i-wildberries-stali-glavnymi-ploshchadkami-dlya-shopinga-u-86-rossiyan-8-sentyabrya-2025-268799) 
о том, что 54% пользователей добавляют товар в избранное перед тем как купить, будем считать это число равным 16. 
Профиль и контакты будем считать по 1, а адреса 2 (дом + ПВЗ).
Отсюда:

СРХ = favorites + orders_headers + order_items + profile + contacts + addresses = 360 + 16 + 1 + 1 + 2 = 380 шт

Приняв следующие размеры записей:

- favorite_record_size = 32 б
- order_header_size = 1024 б
- order_item_size = 64 б
- profile_size = 512 б
- contact_size = 128 б
- address_size = 256 б

Получаем:

СРХ = (16 * 32 +  90 * 1024 + 270 * 64 + 512 + 128 + 2 * 256) = 108,5 Кб = 1,03 * 10^-4 Гб

### Среднее количество действий пользователя (СКД)

Данные рассчитаны именно для **активных** покупателей (20.1 млн в день). [[5]](https://cdn.financemarker.ru/reports/2024/MOEX/O/OZON_2024_6_6M_МСФО_press.pdf)

| Действие (покупатель)                                                                                                                                                    | Среднее кол-во в день  |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------:|
| Поисковые запросы [[6]](https://sberbusiness.live/publications/kak-pokupateli-ischut-tovar-na-marketpleisah-issledovanie-mediascope)                                     |          1,62          |
| Просмотры карточек товара [[7]](https://elama.ru/info/uploads/blog_elama/2025/12/katya/daydzhest_target/reklama_na_mp/ozon_media_kit.pdf)                                |          0,44          |
| Добавление/удаление из избранного [[4]](https://www.retail.ru/news/ozon-i-wildberries-stali-glavnymi-ploshchadkami-dlya-shopinga-u-86-rossiyan-8-sentyabrya-2025-268799) |          0,2           |
| Создание заказа [[7]](https://elama.ru/info/uploads/blog_elama/2025/12/katya/daydzhest_target/reklama_na_mp/ozon_media_kit.pdf)                                          |          0,18          |

| Действие (продавец)                                                                                   | Среднее кол-во в день  |
|-------------------------------------------------------------------------------------------------------|:----------------------:|
| Загрузка новых товаров [[8]](https://t.me/s/ozonhq)                                                   |          1,67          |
| Обновления цены [[8]](https://t.me/s/ozonhq)                                                          |           36           |
| Загрузка изображений [[9]](https://seller-edu.ozon.ru/work-with-goods/reference-goods/content-rating) |           10           |


## Технические метрики

### Размер хранения (разбивка по типам данных)

- MAU = 62,83 млн
- N_buyers = 51,1 млн (активные покупатели)
- N_sellers = 600 000 (активные продавцы)
- N_products = 200 000 000 (товарных наименований)

История:
- orders_per_year = 30
- years_to_keep_orders = 3
- items_per_order = 3

Пользовательские данные:
- favorites_per_user = 16
- addresses_per_user = 2

Средние размеры записей:
- favorite_record_size = 32 B
- order_header_size = 1024 B
- order_item_size = 64 B
- profile_size = 512 B
- contact_size = 128 B
- address_size = 256 B
- product_record_size = 2048 B (карточка без медиа)
- seller_record_size = 1024 B

Медиа:
- avg_images_per_product = 6
- avg_image_size = 300 KB

Search index:
- index_bytes_per_product = 6 KB (документ + служебный overhead)


| Блок данных  | Сущность                |   Кол-во (шт) | Размер записи | Объём, TB |
|--------------|-------------------------|--------------:|--------------:|----------:|
| Пользователь | Profile                 |  63,83 * 10^6 |         512 B |   0,03268 |
| Пользователь | Contact                 |  63,83 * 10^6 |         128 B |   0,00817 |
| Пользователь | Address                 | 127,66 * 10^6 |         256 B |   0,03268 |
| Пользователь | Favorite                |  1,021 * 10^9 |          32 B |   0,03268 |
| Заказы       | OrderHeader             |    4,6 * 10^9 |        1024 B |    4,7104 |
| Заказы       | OrderItem               |   13,8 * 10^9 |          64 B |    0,8832 |
| Каталог      | ProductListing          |    200 * 10^6 |        2048 B |    0,4096 |
| Продавцы     | Seller                  |       600 000 |        1024 B |   0,00061 |
| Поиск        | Search index            |    200 * 10^6 |          6 KB |    0,0012 |
| Медиа        | Images (object storage) |    1,2 * 10^9 |        300 KB |      0,36 |


### RPS по типам запросов (avg/peak)

Дневные объёмы:
- Search/day = 32,48 млн
- Product views/day = 8,84 млн
- Favorites actions/day = 3,98 млн
- Orders created/day = 3,68 млн

- New products/day = 1.0 млн
- Price updates/day = 21,6 млн
- Image uploads/day = 6,0 млн

Перевод в RPS:
RPS_avg = count_per_day / 86400
RPS_peak = RPS_avg * k_peak, где k_peak = 2,5

| Тип запроса            |   Объём/день | RPS avg | RPS peak (k=2.5) |
|------------------------|-------------:|--------:|-----------------:|
| Поиск                  | 32,48 * 10^6 |  375,93 |           939,81 |
| Просмотр товара        |  8,84 * 10^6 |  102,31 |           255,79 |
| Избранное (add/remove) |  3,98 * 10^6 |   46,06 |           115,16 |
| Создание заказа        |  3,68 * 10^6 |   42,59 |           106,48 |
| Seller: создать товар  |   1,0 * 10^6 |   11,57 |            28,94 |
| Seller: обновить цену  |  21,6 * 10^6 |     250 |              625 |
| Seller: загрузить фото |   6,0 * 10^6 |   69,44 |           173,61 |

### Сетевой трафик

Для трафика задаём средний размер “события” (request+response):
- search_api = 31 KB
- product_view_api = 51 KB
- favorite_api = 1 KB
- order_api = 10 KB
- seller_new_product_api = 10 KB
- seller_price_update_api = 1 KB
- seller_image_upload = 301 KB (данные фото + оверхед)

CDN (картинки):
- thumbnails: 20 шт на 1 поиск, 25 KB каждая
- product images: 5 шт на 1 просмотр товара, 250 KB каждая

Формулы:
- Avg_Gbps = (count_per_day * bytes_per_event * 8) / 86400 / 10^9
- GB_per_day = (count_per_day * bytes_per_event) / 10^9
- Peak_Gbps = Avg_Gbps * k_peak (k_peak = 2.5)

| Тип трафика                    | Events/day | Avg bytes/event |          Avg | Peak (k=2.5) |    Volume/day |
|--------------------------------|-----------:|----------------:|-------------:|-------------:|--------------:|
| API: Search                    |     32,48M |            31KB | 0.095 Gbit/s | 0.239 Gbit/s |   1.01 TB/day |
| API: Product view              |      8,84M |            51KB | 0.043 Gbit/s | 0.107 Gbit/s | 461.66 GB/day |
| API: Favorites                 |      3,98M |             1KB |    0.38 Mb/s |    0.94 Mb/s |   4.08 GB/day |
| API: Order create              |      3,68M |            10KB |    3.49 Mb/s |    8.72 Mb/s |  37.68 GB/day |
| API: Seller create product     |      1,00M |            10KB |    0.95 Mb/s |    2.37 Mb/s |  10.24 GB/day |
| API: Seller price update       |     21,60M |             1KB |    2.05 Mb/s |    5.12 Mb/s |  22.12 GB/day |
| Upload: Seller image (ingress) |      6,00M |           301KB | 0.171 Gbit/s | 0.428 Gbit/s |   1.81 TB/day |
| CDN: Thumbnails in search      |     32,48M |           500KB | 1.540 Gbit/s | 3.849 Gbit/s |  16.24 TB/day |
| CDN: Product images in PDP     |      8,84M |          1.22MB | 1.048 Gbit/s | 2.619 Gbit/s |  11.05 TB/day |

## Источники
1. https://mediascope.net/upload/iblock/9da/f39jd547adzptf0mu2j1tlmw44pjgt5d/Mediascope_НРФ_6%20суток.pdf
2. https://ir.ozon.com/en/sth/ozon-reports-second-quarter-2025-financial-results-and-raises-full-year-outlook-c397b9ca
3. https://datainsight.ru/sites/default/files/DI_b2c_online-import_2024_short_version.pdf
4. https://www.retail.ru/news/ozon-i-wildberries-stali-glavnymi-ploshchadkami-dlya-shopinga-u-86-rossiyan-8-sentyabrya-2025-268799
5. https://cdn.financemarker.ru/reports/2024/MOEX/O/OZON_2024_6_6M_МСФО_press.pdf
6. https://sberbusiness.live/publications/kak-pokupateli-ischut-tovar-na-marketpleisah-issledovanie-mediascope
7. https://elama.ru/info/uploads/blog_elama/2025/12/katya/daydzhest_target/reklama_na_mp/ozon_media_kit.pdf
8. https://t.me/s/ozonhq
9. https://seller-edu.ozon.ru/work-with-goods/reference-goods/content-rating
