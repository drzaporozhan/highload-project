## Расчётно-пояснительная записка для маркетплейса (Ozon-подобный сервис)

### Тема проекта
**Маркетплейс** — сервис, который соединяет покупателей и независимых продавцов. Покупатели находят товары, оформляют и оплачивают заказы, получают доставку. Продавцы публикуют ассортимент, управляют ценами/остатками и обрабатывают заказы.

---

### Описание и аналоги

#### Описание
Маркетплейс — это высоконагруженная система с разными “плоскостями” нагрузки и данных:

- **Покупатели (B2C):** поиск, просмотр каталога, корзина, оформление/оплата, отслеживание, возвраты, отзывы.
- **Продавцы (B2B2C):** массовая загрузка каталога, изменение цен, управление остатками, обработка заказов, работа с возвратами.
- **Логистика/выдача (экосистема):** статусы движения заказа, SLA, интеграции с доставкой/ПВЗ.

#### Существующие аналоги
- Ozon
- Wildberries
- Яндекс Маркет
- AliExpress
- Amazon

---

### Целевая аудитория

#### Местоположение аудитории
Россия + страны СНГ.

#### Размер аудитории (ориентир — Ozon)
- **MAU:** 65+ млн [1]
- **DAU:** ~9 млн [2]

#### Объёмы данных/контента 
- **Ассортимент:** порядка 19 млн товарных наименований [2]
- **Заказы:** 334,8 млн заказов за Q2 2024 [3]

---

### Функциональные требования (MVP)

#### Ключевой функционал 
1. **Авторизация и профиль покупателя:** аккаунт, адреса доставки, контакты.
2. **Витрина каталога:** категории, подборки, карточка товара (описание, варианты, цена, наличие, сроки доставки).
3. **Поиск по товарам:** полнотекстовый поиск + фильтры (категория/цена/бренд/доставка/рейтинг) + сортировки.
4. **Корзина:** добавление/удаление/количество, пересчёт стоимости, промокод.
5. **Checkout и создание заказа:** выбор способа доставки/ПВЗ, подтверждение состава, фиксация итоговой цены.
6. **Оплата и статусы платежа:** интеграция с PSP, обработка успеха/ошибки/возврата.
7. **ЛК продавца:** управление товарами (создание/редактирование), цены и остатки, список заказов.

---

### Ключевые продуктовые решения (чтобы архитектура была нетривиальной)

**Разделяем “витрину” и “транзакции”**: каталог/поиск — read-heavy (кэш + индекс), заказы/оплата — отдельный транзакционный контур.
**Поиск — отдельная подсистема**: индексация товаров и обновления цен/остатков идут асинхронно через очередь событий.
**Заказ как state machine**: статусы заказа меняются событиями, на них подписаны уведомления/логистика/аналитика.
**Идемпотентность**: ключевые операции (создание заказа/платёж) защищены idempotency key и ретраями.
**Медиа отдельно**: фото/документы — объектное хранилище + CDN.
**Защита**: rate limiting и базовый антифрод.

---

### Список источников
1) https://www.retail.ru/news/ozon-stal-liderom-po-mesyachnoy-auditorii-v-rossiyskom-e-commerce-v-iyule/  
2) https://tass.ru/ekonomika/11649693  
3) https://cdn.financemarker.ru/reports/2024/MOEX/O/OZON_2024_6_6M_%D0%9C%D0%A1%D0%A4%D0%9E_press.pdf  
